{"ast":null,"code":"import Axios from \"axios\";\n\nconst register = props => {\n  const {\n    e,\n    regUsername,\n    regPassword,\n    history\n  } = props;\n  e.preventDefault();\n  console.log(props);\n  Axios.post(\"http://localhost:3001/user/register \", {\n    username: regUsername,\n    password: regPassword\n  }).then(res => {\n    console.log(res.data.msg);\n\n    if (res.data.msg === \"User created\") {\n      history.push(\"/login\");\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst logout = props => {\n  const {\n    e,\n    setIsLoggedin,\n    setCheckUser,\n    setCurrentUser,\n    history\n  } = props;\n  e.preventDefault();\n  Axios.post(\"/user/logout\").then(res => {\n    history.push(\"/login\");\n    setIsLoggedin(false);\n    setCheckUser(false);\n    setCurrentUser({});\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst checkUserStatus = () => {\n  if (!this.state.authenticated) {\n    Axios.get(\"/user/checkuser\").then(res => {\n      if (res.data.msg === \"You are logged in\") {\n        this.setState({\n          currentUser: res.data.user,\n          isLoggedIn: true\n        });\n      } else {\n        this.setState({\n          isLoggedIn: false\n        });\n      }\n\n      this.setState({\n        authenticated: true\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n};\n\nexport { register, logout, checkUserStatus };","map":{"version":3,"sources":["/Users/zacyou/Desktop/PattonUniversity/PattonUniverCity/src/utils/userFunctions.js"],"names":["Axios","register","props","e","regUsername","regPassword","history","preventDefault","console","log","post","username","password","then","res","data","msg","push","catch","err","logout","setIsLoggedin","setCheckUser","setCurrentUser","checkUserStatus","state","authenticated","get","setState","currentUser","user","isLoggedIn"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC3B,QAAM;AAAEC,IAAAA,CAAF;AAAKC,IAAAA,WAAL;AAAkBC,IAAAA,WAAlB;AAA+BC,IAAAA;AAA/B,MAA2CJ,KAAjD;AACAC,EAAAA,CAAC,CAACI,cAAF;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,KAAZ;AACAF,EAAAA,KAAK,CAACU,IAAN,CAAW,sCAAX,EAAmD;AAClDC,IAAAA,QAAQ,EAAEP,WADwC;AAElDQ,IAAAA,QAAQ,EAAEP;AAFwC,GAAnD,EAIEQ,IAJF,CAIQC,GAAD,IAAS;AACdN,IAAAA,OAAO,CAACC,GAAR,CAAYK,GAAG,CAACC,IAAJ,CAASC,GAArB;;AACA,QAAIF,GAAG,CAACC,IAAJ,CAASC,GAAT,KAAiB,cAArB,EAAqC;AACpCV,MAAAA,OAAO,CAACW,IAAR,CAAa,QAAb;AACA;AACD,GATF,EAUEC,KAVF,CAUSC,GAAD,IAAS;AACfX,IAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AACA,GAZF;AAaA,CAjBD;;AAoBA,MAAMC,MAAM,GAAIlB,KAAD,IAAW;AACzB,QAAM;AAAEC,IAAAA,CAAF;AAAKkB,IAAAA,aAAL;AAAoBC,IAAAA,YAApB;AAAkCC,IAAAA,cAAlC;AAAkDjB,IAAAA;AAAlD,MAA8DJ,KAApE;AACAC,EAAAA,CAAC,CAACI,cAAF;AACAP,EAAAA,KAAK,CAACU,IAAN,CAAW,cAAX,EACEG,IADF,CACQC,GAAD,IAAS;AACdR,IAAAA,OAAO,CAACW,IAAR,CAAa,QAAb;AACAI,IAAAA,aAAa,CAAC,KAAD,CAAb;AACAC,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAC,IAAAA,cAAc,CAAC,EAAD,CAAd;AACA,GANF,EAOEL,KAPF,CAOSC,GAAD,IAAS;AACfX,IAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AACA,GATF;AAUA,CAbD;;AAeA,MAAMK,eAAe,GAAG,MAAM;AAC7B,MAAI,CAAC,KAAKC,KAAL,CAAWC,aAAhB,EAA+B;AAC7B1B,IAAAA,KAAK,CAAC2B,GAAN,CAAU,iBAAV,EACEd,IADF,CACQC,GAAD,IAAS;AAChB,UAAIA,GAAG,CAACC,IAAJ,CAASC,GAAT,KAAiB,mBAArB,EAA0C;AACzC,aAAKY,QAAL,CAAc;AAACC,UAAAA,WAAW,EAAEf,GAAG,CAACC,IAAJ,CAASe,IAAvB;AAA6BC,UAAAA,UAAU,EAAE;AAAzC,SAAd;AACE,OAFH,MAES;AACR,aAAKH,QAAL,CAAc;AAACG,UAAAA,UAAU,EAAE;AAAb,SAAd;AACE;;AACD,WAAKH,QAAL,CAAc;AAACF,QAAAA,aAAa,EAAE;AAAhB,OAAd;AACD,KARD,EASCR,KATD,CASQC,GAAD,IAAS;AACdX,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AACD,KAXD;AAYA;AACC,CAfJ;;AAgBA,SAASlB,QAAT,EAAmBmB,MAAnB,EAA2BI,eAA3B","sourcesContent":["import Axios from \"axios\";\n\nconst register = (props) => {\n\tconst { e, regUsername, regPassword, history } = props;\n\te.preventDefault();\n\tconsole.log(props)\n\tAxios.post(\"http://localhost:3001/user/register \", {\n\t\tusername: regUsername,\n\t\tpassword: regPassword,\n\t})\n\t\t.then((res) => {\n\t\t\tconsole.log(res.data.msg);\n\t\t\tif (res.data.msg === \"User created\") {\n\t\t\t\thistory.push(\"/login\");\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t});\n};\n\n\nconst logout = (props) => {\n\tconst { e, setIsLoggedin, setCheckUser, setCurrentUser, history } = props;\n\te.preventDefault();\n\tAxios.post(\"/user/logout\")\n\t\t.then((res) => {\n\t\t\thistory.push(\"/login\");\n\t\t\tsetIsLoggedin(false);\n\t\t\tsetCheckUser(false);\n\t\t\tsetCurrentUser({});\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t});\n};\n\nconst checkUserStatus = () => {\n\tif (!this.state.authenticated) {\n\t  Axios.get(\"/user/checkuser\")\n\t   .then((res) => {\n\t\t if (res.data.msg === \"You are logged in\") {             \n\t\t\t this.setState({currentUser: res.data.user, isLoggedIn: true})\n\t\t   } else {\n\t\t\t this.setState({isLoggedIn: false})\n\t\t   }\n\t\t   this.setState({authenticated: true})\n\t\t })\n\t\t .catch((err) => {\n\t\t   console.log(err);\n\t\t });\n\t }\n   }\nexport { register, logout, checkUserStatus };\n"]},"metadata":{},"sourceType":"module"}